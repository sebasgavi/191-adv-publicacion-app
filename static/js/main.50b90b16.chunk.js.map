{"version":3,"sources":["utils/api.ts","stores/stores.ts","firebaseCredentials.js","components/DepartmentsMenu/DepartmentsMenu.tsx","components/NavBar/NavBar.tsx","components/Filters/Filters.tsx","components/Store/Store.tsx","components/App/App.tsx","index.tsx"],"names":["apiRoot","api","getDepartments","callback","fetch","concat","then","rawInfo","json","departments","getCategories","categories","rows","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","store","_this","this","loadingDeps","depsLocal","localStorage","getItem","depsLocalTime","Date","now","parseInt","JSON","parse","result","setItem","stringify","toJS","id","currentDept","currentCat","_this2","fileName","fileContent","storage","ref","child","putString","snapshot","console","log","_this3","dep","find","e","department_id","cat","category_id","name","observable","computed","action","observer","react_default","a","createElement","map","key","onClick","setDepartment","style","backgroundColor","className","components_DepartmentsMenu_DepartmentsMenu","Filters","props","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","pageTitle","setCategory","background","Component","Store","components_Filters_Filters","App","initializerDefineProperty","App_descriptor","assertThisInitialized","App_descriptor2","es","onDrop","acceptedFiles","reader","FileReader","onload","file","target","readAsDataURL","_ref","getRootProps","getInputProps","src","width","type","onInput","value","uploadFile","components_NavBar_NavBar","components_Store_Store","ReactDOM","render","components_App_App","document","getElementById"],"mappings":"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","file":"static/js/main.50b90b16.chunk.js","sourcesContent":["\r\nimport { depsArray, catsArray } from '../stores/stores';\r\n\r\nconst apiRoot = 'https://backendapi.turing.com';\r\n\r\nfunction getDepartments(callback: (result: depsArray) => void){\r\n    fetch(`${apiRoot}/departments`)\r\n        .then(( rawInfo ) => {\r\n            return rawInfo.json();\r\n        })\r\n        .then(( departments ) => {\r\n            callback(departments);\r\n        });\r\n}\r\n\r\nfunction getCategories(callback: (result: catsArray) => void){\r\n    fetch(`${apiRoot}/categories`)\r\n        .then(( rawInfo ) => {\r\n            return rawInfo.json();\r\n        })\r\n        .then(( categories ) => {\r\n            callback(categories.rows);\r\n        });\r\n}\r\n\r\nexport default {\r\n    getDepartments,\r\n    getCategories\r\n};","import { observable, autorun, toJS, configure, action, computed } from 'mobx';\r\nimport firebase from 'firebase';\r\n\r\nimport credentials from '../firebaseCredentials';\r\nfirebase.initializeApp(credentials);\r\n\r\nimport api from '../utils/api';\r\n\r\nexport type depsArray = { name: string, department_id: number }[];\r\nexport type catsArray = { name: string, category_id: number, department_id: number }[];\r\n\r\n\r\n\r\nclass Store {\r\n\r\n    @observable departments: depsArray|null = null;\r\n    @observable loadingDeps: boolean = false;\r\n\r\n    @observable categories: catsArray|null|false = null;\r\n\r\n    @observable currentDept: number|null = null;\r\n    @observable currentCat: number|null = null;\r\n\r\n    @computed get pageTitle(){\r\n        var dep = this.departments && this.departments.find(e => e.department_id == this.currentDept);\r\n        var cat = this.categories && this.categories.find(e => e.category_id == this.currentCat);\r\n\r\n        var res = `${dep ? dep.name : ''} ${cat ? ' - ' + cat.name : ''}`;\r\n        return res;\r\n    }\r\n\r\n    @action getDepartments(){\r\n        if(this.loadingDeps || this.departments) return;\r\n\r\n        var depsLocal = localStorage.getItem('departments');\r\n        var depsLocalTime = localStorage.getItem('departments_time');\r\n        if(depsLocal && depsLocalTime && \r\n            Date.now() - parseInt(depsLocalTime) < 7 * 24 * 60 * 60 * 1000 ) {\r\n            this.departments = JSON.parse(depsLocal);\r\n            return;\r\n        }\r\n\r\n        this.loadingDeps = true;\r\n        var callback = (result: depsArray) => {            \r\n            localStorage.setItem('departments', JSON.stringify(toJS(result)));\r\n            localStorage.setItem('departments_time', Date.now() + '');\r\n\r\n            this.departments = result;\r\n            this.loadingDeps = false;\r\n        }\r\n        api.getDepartments(callback);\r\n    }\r\n\r\n    @action setDepartment(id: number){\r\n        this.currentDept = id;\r\n        this.currentCat = null;\r\n    }\r\n\r\n    @action getCategories(){\r\n        if(this.categories != null) return;\r\n\r\n        this.categories = false;\r\n        api.getCategories((result: catsArray) => {\r\n            this.categories = result;\r\n        });\r\n    }\r\n\r\n    @action setCategory(id: number){\r\n        this.currentCat = id;\r\n    }\r\n\r\n    uploadFile(fileName: string, fileContent: string){\r\n        let storage = firebase.storage().ref();\r\n        let file = storage.child('gatos/'+fileName);\r\n        file.putString(fileContent, 'data_url').then(function(snapshot) {\r\n            console.log('Uploaded a base64url string!');\r\n        });\r\n    }\r\n}\r\n\r\nconst store = new Store();\r\n\r\nexport default store;","export default {\r\n    apiKey: \"AIzaSyApqUPW4WvE5dCC0G7z8lpqhTndxK66aoM\",\r\n    authDomain: \"adv-90ad2.firebaseapp.com\",\r\n    databaseURL: \"https://adv-90ad2.firebaseio.com\",\r\n    projectId: \"adv-90ad2\",\r\n    storageBucket: \"adv-90ad2.appspot.com\",\r\n    messagingSenderId: \"652073464161\",\r\n    appId: \"1:652073464161:web:e25895ffe91aa783\"\r\n};","import React, { Component } from 'react';\r\nimport { observer } from 'mobx-react';\r\n\r\nimport store from '../../stores/stores';\r\n\r\nconst DepartmentsMenu = () => {\r\n    var handleClick = (id: number) => {\r\n        store.setDepartment(id);\r\n    }\r\n\r\n    return <div>\r\n        {store.departments && store.departments.map(( dep ) => {\r\n            return <button key={dep.department_id} \r\n                onClick={() => {\r\n                    handleClick(dep.department_id);\r\n                }}\r\n                style={{\r\n                    backgroundColor: store.currentDept === dep.department_id ? '#E0E0E0' : 'white',\r\n                }}\r\n                className={store.currentDept === dep.department_id ? 'active' : ''}>\r\n                {dep.name}\r\n            </button>;\r\n        })}\r\n    </div>;\r\n}\r\n\r\n\r\nexport default observer(DepartmentsMenu);","import React, { Component } from 'react';\r\nimport { observer } from 'mobx-react';\r\n\r\nimport store from '../../stores/stores';\r\nimport DepartmentsMenu from '../DepartmentsMenu/DepartmentsMenu';\r\n\r\nconst NavBar = () => {\r\n    if(!store.departments) return <p>Cargando...</p>;\r\n\r\n    return <nav>\r\n        <DepartmentsMenu />\r\n    </nav>;\r\n}\r\n\r\n\r\nexport default observer(NavBar);","import React, { Component } from 'react';\r\nimport store from '../../stores/stores';\r\nimport { observer } from 'mobx-react';\r\nimport DepartmentsMenu from '../DepartmentsMenu/DepartmentsMenu';\r\n\r\n@observer\r\nclass Filters extends Component{\r\n\r\n    constructor(props: {}){\r\n        super(props);\r\n\r\n        store.getCategories();\r\n    }\r\n\r\n    render(){\r\n        return <div>\r\n            <p>{store.pageTitle}</p>\r\n            <h3>{store.departments ? 'Departments' : 'Loading Departments...'}</h3>\r\n            <DepartmentsMenu />\r\n\r\n            {store.currentDept != null && <h3>{store.categories ? 'Categories' : 'Loading Categories...'}</h3>}\r\n            {store.categories && store.categories.map(( cat ) => {\r\n                if(cat.department_id != store.currentDept) return null;\r\n                return <button key={cat.category_id} \r\n                    onClick={() => {\r\n                        store.setCategory(cat.category_id);\r\n                    }}\r\n                    style={{ background: store.currentCat == cat.category_id ? 'gray' : 'white' }}>\r\n                    {cat.name}\r\n                </button>;\r\n            })}\r\n        </div>\r\n    }\r\n}\r\n\r\nexport default Filters;","import React, { Component } from 'react';\r\nimport Filters from '../Filters/Filters';\r\n\r\nclass Store extends Component{\r\n\r\n    render(){\r\n        return <div>\r\n            <h1>Store page</h1>\r\n\r\n            <Filters />\r\n            <Filters />\r\n\r\n            <p>productos</p>\r\n        </div>\r\n    }\r\n}\r\n\r\nexport default Store;","import React, { Component } from 'react';\r\nimport './App.css';\r\nimport NavBar from '../NavBar/NavBar';\r\nimport Store from '../Store/Store';\r\nimport Dropzone from 'react-dropzone';\r\n\r\nimport { observable } from 'mobx';\r\n\r\nimport api from '../../utils/api';\r\nimport store from '../../stores/stores';\r\nimport { observer } from 'mobx-react';\r\n\r\n@observer\r\nclass App extends Component {\r\n\r\n  @observable file: any = null;\r\n  @observable fileName: string = '';\r\n\r\n  constructor(props: {}){\r\n    super(props);\r\n\r\n    store.getDepartments();\r\n  }\r\n\r\n  render() {\r\n    \r\n    \r\n\r\n    return (\r\n      <div className=\"App\">\r\n\r\n        <Dropzone onDrop={acceptedFiles => {\r\n            //this.file = acceptedFiles[0];\r\n            console.log(acceptedFiles[0]);\r\n            \r\n            var reader = new FileReader();\r\n\r\n            reader.onload = (e: any) => {\r\n              this.file = e.target.result;\r\n              console.log(this.file);\r\n            }\r\n\r\n            reader.readAsDataURL(acceptedFiles[0]);\r\n          }}>\r\n          {({getRootProps, getInputProps}) => (\r\n            <section>\r\n              <div {...getRootProps()}>\r\n                <input {...getInputProps()} />\r\n                <p>Drag 'n' drop some files here, or click to select files</p>\r\n              </div>\r\n            </section>\r\n          )}\r\n        </Dropzone>\r\n\r\n        {this.file && <div>\r\n          <img src={this.file} style={{ width: '100%' }} />\r\n          <input type=\"text\" onInput={(e: any) => this.fileName = e.target.value}/>\r\n          <button onClick={() => {\r\n            store.uploadFile(this.fileName + '.jpg', this.file);\r\n          }}>Subir imagen</button>\r\n        </div>}\r\n\r\n        <h1>{ store.pageTitle }</h1>\r\n      \r\n        <NavBar />\r\n\r\n        <Store />\r\n\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default observer(App);\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './components/App/App';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n"],"sourceRoot":""}